class t extends HTMLElement{static get props(){return{}}static get observedAttributes(){return Object.keys(this.props).map((t=>this.attributeName(t)))}static attributeName(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}constructor(t=!0,e={}){super(),this._=this,this.$={},this.attrToProp={},this.propToAttr={},Object.keys(this.constructor.props).forEach((t=>{const e=this.constructor.attributeName(t);this.attrToProp[e]=t,this.propToAttr[t]=e})),t&&(this.attachShadow({mode:"open",...e}),this._=this.shadowRoot);const n=Object.keys(this.constructor.props).reduce(((t,e)=>({...t,[e]:this[e]})),{});Promise.resolve().then((()=>{this._props={},Object.keys(this.constructor.props).forEach((t=>{const e=this.constructor.props[t],i=this.propToAttr[t];let s=this[t];if(this.hasAttribute(i)){if(s=this.getAttribute(i),[Array,Object].includes(e.type))try{s=JSON.parse(s)}catch(t){}}else void 0!==n[t]&&(s=n[t]);Object.defineProperty(this,t,{set:this.setter(t),get:this.getter(t)}),this[t]=s}))})),this._renderPromise=null,this._isConnected=!1,this._triggers={}}connectedCallback(){this._isConnected=!0,this._render(!0,!0)}disconnectedCallback(){this._isConnected=!1}_requestRender(){this._renderPromise||(this._renderPromise=Promise.resolve().then((()=>{this._render()})))}_render(t=!1,e=!1){(t||this.shouldRender(this._triggers)&&Object.keys(this._triggers).length)&&(this._renderPromise=Promise.resolve().then((()=>{e&&(this.firstRender(this._,this._triggers),this.$=[...this._.querySelectorAll("[id]")].reduce(((t,e)=>({...t,[e.id]:e})),{}),this.firstRendered(this._,this._triggers)),this.render(this._,this._triggers),this.rendered(this._,this._triggers),this._renderPromise=null,this._triggers={}})))}forceRender(){this._render(!0)}shouldRender(){return!0}firstRender(){}render(){}firstRendered(){}rendered(){}setter(t){const e=this.propToAttr[t];return n=>{if(this._props[t]===n)return;t in this._triggers||(this._triggers[t]=this._props[t]),this._props[t]=n;const i=this.constructor.props[t];if(this.constructor.observedAttributes.includes(e)){let t=n;i.type===Boolean?(t=t||""===t,t?this.setAttribute(e,""):this.removeAttribute(e)):([Array,Object].includes(i.type)&&(t=JSON.stringify(t)),this.getAttribute(e)!==t&&([null,void 0].includes(t)?this.removeAttribute(e):this.setAttribute(e,t)))}this._isConnected&&this._requestRender()}}getter(t){return()=>this._props[t]}attributeChangedCallback(t,e,n){const i=this.attrToProp[t];let s=n;switch(this.constructor.props[i].type){case Boolean:s=""===s;break;case Number:s=Number(s);break;case Array:case Object:try{s=JSON.parse(s)}catch(t){}}this[i]!==s&&(this[i]=s)}}customElements.define("aeon-select",class extends t{static get props(){return{value:{type:Number},items:{type:Array}}}constructor(){super(),this.items=[]}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        select {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          padding: 0.5rem;\n          padding-right: 1.5rem;\n          font-family: inherit;\n          font-size: inherit;\n          border-radius: 0;\n          border: 1px solid var(--hintColor);\n          background-color: transparent;\n          color: var(--color);\n          width: 100%;\n        }\n\n        select::-ms-expand {\n          display: none;\n        }\n\n        .select {\n          position: relative;\n        }\n\n        .select .indicator {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: 0.2rem;\n          pointer-events: none;\n          display: flex;\n          align-items: center;\n        }\n      </style>\n\n      <div class="select">\n        <select id="select">\n        </select>\n        <span class="indicator">\n          <svg width="24" height="24">\n            <g><path fill="currentColor" d="M7 10l5 5 5-5z"></path></g>\n          </svg>\n        </span>\n      </div>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(e,"aeon-select"),window.ShadyCSS&&ShadyCSS.styleElement(this),t.appendChild(e.content.cloneNode(!0))}focus(){this.$.select.focus()}firstRendered(t){this.$.select.addEventListener("change",(t=>{this.value=t.target.value}))}render(t,e){"value"in e&&this.dispatchEvent(new Event("change",{bubbles:!0})),this.$.select.innerHTML=this.items.map((t=>`<option value="${t.value}">${t.name}</option>`)).join(""),this.$.select.value=this.value}}),customElements.define("aeon-calendar",class extends t{static get props(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},year:{type:Number},month:{type:Number},day:{type:Number},hours:{type:Number},minutes:{type:Number},open:{type:Boolean}}}constructor(){super(),this.showTime=!1,this.confirmOnDate=!1,this.open=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onKeyDown.bind(this))}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        :host {\n          display: none;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n\n          position: relative;\n          z-index: 1;\n          padding: 0.2rem;\n          background-color: var(--bgColor);\n        }\n\n        :host([open]) {\n          display: flex;\n        }\n\n        .week {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .day, .date, button {\n          color: var(--color);\n          background-color: transparent;\n          border: 0;\n          box-sizing: border-box;\n          width: 2.4rem;\n          height: 2.4rem;\n          padding: 0;\n          font-family: inherit;\n          font-size: calc(2.4rem / 3);\n\n          text-transform: uppercase;\n\n          flex-grow: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .date {\n          border: 1px solid var(--hintColor);\n          border-width: 0 0 1px 1px;\n        }\n\n        .date:last-child {\n          border-right-width: 1px;\n        }\n\n        .date.last + .spacer {\n          border-left-width: 1px;\n        }\n\n        .week:nth-child(2) .date:not(.spacer) {\n          border-top-width: 1px;\n        }\n\n        .week:last-child .spacer {\n          border-right-width: 0;\n          border-bottom-width: 0;\n        }\n\n        .date.today {\n          font-weight: bold;\n        }\n\n        .date:hover, .date.today {\n          font-size: 1.3rem;\n        }\n\n        .date.spacer {\n          border-left-width: 0;\n          pointer-events: none;\n        }\n\n        #buttons {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n        }\n\n        #year-month, #hours-minutes {\n          display: flex;\n          width: 100%;\n        }\n\n        #year-month aeon-select {\n          width: 50%;\n        }\n\n        #year-month aeon-select + aeon-select {\n          margin-left: 0.5rem;\n        }\n\n        #hours-minutes {\n          padding-top: 0.5em;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n          display: none;\n          justify-content: center;\n          align-items: center;\n        }\n\n        #hours-minutes aeon-select {\n          width: 3.5rem;\n        }\n\n        #hours-minutes aeon-select#hours {\n          margin-right: 0.2em;\n        }\n\n        #hours-minutes aeon-select#minutes {\n          margin-left: 0.2em;\n        }\n\n        :host([show-time]) #hours-minutes {\n          display: flex;\n        }\n      </style>\n\n      <div id="container">\n        <div id="year-month">\n          <aeon-select id="year"></aeon-select>\n          <aeon-select id="month"></aeon-select>\n        </div>\n        <div id="calendar"></div>\n        <div id="hours-minutes">\n          <aeon-select id="hours"></aeon-select>:<aeon-select id="minutes"></aeon-select>\n        </div>\n        <div id="buttons">\n          <button id="confirm" title="Confirm">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g>\n            </svg>\n          </button>\n          <button id="cancel" title="Cancel">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>\n            </svg>\n          </button>\n          <button id="clear" title=\'Clear\'>\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g>\n            </svg>\n          </button>\n        </div>\n      </div>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(e,"aeon-calendar"),window.ShadyCSS&&ShadyCSS.styleElement(this),t.appendChild(e.content.cloneNode(!0))}firstRendered(t){this.addEventListener("keyup",(t=>{switch(t.key){case"Escape":this.open=!1}})),this.$.year.addEventListener("change",(t=>{this.year=t.target.value})),this.$.month.addEventListener("change",(t=>{this.month=t.target.value})),this.$.hours.items=[];for(let t=0;t<24;t++)this.$.hours.items.push({name:(""+t).padStart(2,"0"),value:t});this.$.hours.addEventListener("change",(t=>{this.hours=t.target.value})),this.$.minutes.items=[];for(let t=0;t<60;t++)this.$.minutes.items.push({name:(""+t).padStart(2,"0"),value:t});this.$.minutes.addEventListener("change",(t=>{this.minutes=t.target.value})),this.$.calendar.addEventListener("click",this.onDateClick.bind(this)),this.$.cancel.addEventListener("click",(()=>{this.open=!1})),this.$.confirm.addEventListener("click",(()=>{this.confirm()})),this.$.clear.addEventListener("click",(()=>{this.dispatchEvent(new Event("clear",{bubbles:!0})),this.open=!1}))}render(t,e){"open"in e&&!1===this.open&&!0===e.open&&this.dispatchEvent(new Event("close",{bubbles:!0})),("year"in e||"month"in e||"day"in e)&&(this.date=this.formatAsDate(this.year,this.month,this.day)),("hours"in e||"minutes"in e)&&(this.time=this.formatAsTime(this.hours,this.minutes));const n=new Date;n.setMonth(0),n.setDate(1),this.$.year.value=this.year,this.$.year.items=[];for(let t=this.startYear;t<=this.endYear;t++)this.$.year.items.push({value:t,name:t});this.$.month.value=this.month,this.$.month.items=[];for(let t=0;t<12;t++){let e=n.getMonth();this.$.month.items.push({value:e,name:n.toLocaleString(this.locale||void 0,{month:"short"})}),n.setMonth(t+1)}this.$.month.items.sort(((t,e)=>t.num-e.num)),n.setMonth(0),n.setDate(1);const i=[];for(let t=0;t<7;t++){let e=n.getDay();i.push({num:e,name:n.toLocaleString(this.locale||void 0,{weekday:"short"})}),n.setDate(t+2)}const s=7-this.startDay;i.sort(((t,e)=>(t.num+s)%7-(e.num+s)%7)),this.$.hours.value=this.hours,this.$.minutes.value=this.minutes;let a=new Date(this.year,this.month,1,12);const r=a.getDay();a.setMonth(a.getMonth()+1),a.setDate(0);const o=a.getDate();a=new Date(this.year,this.month,1,12);let h=!1,l=!1,d=0;this.$.calendar.innerHTML=`\n      <div class="week">\n        ${i.map((t=>`<div class="day">${t.name}</div>`)).join("")}\n      </div>\n\n      ${[0,1,2,3,4,5].map((()=>d>=o?null:`\n          <div class="week">\n            ${i.map((t=>{t.num%7===r&&(h=!0);let e="";h&&(d+=1,d<=o?(e=d,a.setDate(e)):l=!0);return`\n                  <button class="date ${d===this.day?"today":""} ${!h||l?"spacer":""} ${d===o?"last":""}" data-day="${d}" ${!h||l?"tabindex='-1' disabled":""}>${e}</button>\n              `})).join("")}\n          </div>\n         `)).join("")}\n    `;const c=t.querySelectorAll("button:not([disabled]), aeon-select");this._firstFocusableEl=c[0],this._lastFocusableEl=c[c.length-1]}rendered(t,e){!0===this.open&&("open"in e&&!1===e.open||"day"in e)&&t.querySelector(".today").focus()}confirm(){this.date=this.formatAsDate(this.year,this.month,this.day),this.time=this.formatAsTime(this.hours,this.minutes),this.value={date:this.date,time:this.time},this.dispatchEvent(new Event("change",{bubbles:!0}))}handleTabKey(t){const e=this.shadowRoot.activeElement;t.shiftKey&&e===this._firstFocusableEl?(this._lastFocusableEl.focus(),t.preventDefault()):t.shiftKey||e!==this._lastFocusableEl||(this._firstFocusableEl.focus(),t.preventDefault())}handleArrowKeys(t){let e=0;switch(t.key){case"ArrowUp":e=-7;break;case"ArrowRight":e=1;break;case"ArrowLeft":e=-1;break;case"ArrowDown":e=7}const n=new Date(this.year,this.month,this.day);n.setDate(this.day+e),this.year=n.getFullYear(),this.month=n.getMonth(),this.day=n.getDate()}onKeyDown(t){"Enter"===t.key?this.confirm():"Tab"===t.key?this.handleTabKey(t):["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)&&this.handleArrowKeys(t)}onDateClick(t){if(t.target.classList.contains("date")){const e=t.target;this.day=parseInt(e.dataset.day,10),this.confirmOnDate&&!this.showTime&&this.confirm()}}formatAsDate(t,e,n){return`${t}-${(""+(e+1)).padStart(2,"0")}-${(""+n).padStart(2,"0")}`}formatAsTime(t,e){return`${(""+t).padStart(2,"0")}:${(""+e).padStart(2,"0")}`}}),customElements.define("aeon-datepicker",class extends t{static get props(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},dateStyle:{type:Object},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},defaultDate:{type:String},defaultTime:{type:String},hasNative:{type:Boolean},useNative:{type:Boolean},alignTop:{type:Boolean},alignRight:{type:Boolean}}}constructor(){super();const t=new Date;this.showTime=!1,this.confirmOnDate=!1,this.alignTop=!1,this.alignRight=!1,this.dateStyle={},this.startYear=t.getFullYear()-100,this.endYear=t.getFullYear()+5,this.startDay=1;try{const t=document.createElement("input");t.type="date",this.hasNative="date"===t.type}catch(t){this.hasNative=!1}this.onLabelClick=this.onLabelClick.bind(this),this.onClickOutside=this.onClickOutside.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this.onClickOutside)}disconnectedCallback(){super.disconnectedCallback(),this._dateInput&&[...this._dateInput.labels||[]].forEach((t=>{t.removeEventListener("click",this.onLabelClick)})),document.removeEventListener("click",this.onClickOutside)}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        :host {\n          position: relative;\n          display: inline-block;\n\n          --rgb: var(--aeon-rgb, 0, 0, 0);\n          --bgRgb: var(--aeon-bgRgb, 248, 248, 248);\n          --color: rgb(var(--rgb));\n          --hintColor: rgba(var(--rgb), 0.2);\n          --bgColor: rgb(var(--bgRgb));\n\n          color: var(--color);\n        }\n\n        ::slotted(input[type=date]),\n        ::slotted(input[type=time]) {\n          display: none;\n        }\n\n        :host([has-native][use-native]) ::slotted(input[type=date]),\n        :host([has-native][use-native]) ::slotted(input[type=time]) {\n          display: inline-flex;\n        }\n\n        :host([has-native][use-native]) slot[name=output] {\n          display: none;\n        }\n\n        aeon-calendar {\n          position: absolute;\n          top: 100%;\n          left: 0;\n        }\n\n        :host([align-top]) aeon-calendar {\n          top: auto;\n          bottom: 100%;\n        }\n\n        :host([align-right]) aeon-calendar {\n          left: auto;\n          right: 0;\n        }\n\n        @media (max-width: 640px) {\n          aeon-calendar,\n          :host([align-top]) aeon-calendar,\n          :host([align-right]) aeon-calendar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n          }\n        }\n      </style>\n\n      <slot></slot>\n      <slot name="output"></slot>\n\n      <aeon-calendar id="calendar"></aeon-calendar>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(e,"aeon-datepicker"),window.ShadyCSS&&ShadyCSS.styleElement(this),t.appendChild(e.content.cloneNode(!0))}firstRendered(t){const e=t.querySelector("slot");e.addEventListener("slotchange",(t=>{const n=e.assignedNodes().filter((t=>t.nodeType!=Node.TEXT_NODE));this._dateInput=n.find((t=>"date"===t.getAttribute("type"))),this._dateInput&&(this._output.placeholder=this._dateInput.placeholder,(this._dateInput.labels||[]).forEach((t=>{t.addEventListener("click",this.onLabelClick)})),this.date=this._dateInput.value),this._timeInput=n.find((t=>"time"===t.getAttribute("type"))),this._timeInput&&(this.showTime=!0,this.time=this._timeInput.value)})),this._output=document.createElement("input"),this._output.slot="output",this._output.readOnly=!0,this._output.addEventListener("click",(()=>{this.openCalendar()})),this.appendChild(this._output),this.addEventListener("keyup",(t=>{switch(t.key){case" ":this.$.calendar.open||this.openCalendar()}})),this.$.calendar.addEventListener("change",(t=>{this.date=t.target.value.date,this.time=t.target.value.time,this.closeCalendar()})),this.$.calendar.addEventListener("clear",(()=>{this.date=""})),this.$.calendar.addEventListener("close",(()=>{this._dontFocus||this._output.focus(),this._dontFocus=!1}))}render(t,e){("date"in e||"time"in e)&&(this.value={date:this.date,time:this.time},this.updateFromString(this.date,this.time),this.dispatchEvent(new Event("change",{bubbles:!0}))),("locale"in e||"startYear"in e||"endYear"in e||"startDay"in e||"showTime"in e||"confirmOnDate"in e)&&this.updateFromString(this.date,this.time)}update(t=null){const e=t&&!isNaN(t);let n=t;if(!e){const t=this.defaultDate,e=this.defaultTime;n=this.parseDate(t,e)}const i=this.$.calendar;if(i.year=n.getFullYear(),i.month=n.getMonth(),i.day=n.getDate(),i.hours=n.getHours(),i.minutes=n.getMinutes(),i.locale=this.locale,i.startYear=this.startYear,i.endYear=this.endYear,i.startDay=this.startDay,i.showTime=this.showTime,i.confirmOnDate=this.confirmOnDate,e){const e=new Intl.DateTimeFormat(this.locale||void 0,{year:"numeric",month:"numeric",day:"numeric",...this.showTime?{hour:"numeric",minute:"numeric"}:{},...this.dateStyle}).format(t);this._output.value=e,this._dateInput&&(this._dateInput.value=this.date),this._timeInput&&(this._timeInput.value=this.time)}else this._output.value="",this._dateInput&&(this._dateInput.value=""),this._timeInput&&(this._timeInput.value="")}openCalendar(){const t=this.getBoundingClientRect(),e=t.top,n=window.innerHeight-t.bottom,i=t.left,s=window.innerWidth-t.right;this.alignTop=n<e,this.alignRight=s<i,this.$.calendar.open=!0}closeCalendar(t=!1){this.$.calendar.open=!1,this._dontFocus=t}parseDate(t,e){try{const n=t.split("-"),i=(e||this.defaultTime||"00:00").split(":");return new Date(n[0],parseInt(n[1],10)-1,n[2],i[0],i[1])}catch(t){return new Date}}updateFromString(t,e){this.update(this.parseDate(t,e))}onLabelClick(t){this.useNative&&this.hasNative||(t.preventDefault(),this._output.focus())}onClickOutside(t){if(this.$.calendar.open){!t.composedPath().some((t=>t===this))&&this.closeCalendar(!0)}}});
//# sourceMappingURL=aeon.js.map
