!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,n){return(l=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function f(e){var t=u();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(t){o(s,t);var i=f(s);function s(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,s),(t=i.call(this))._=h(t),t.$={},t.attrToProp={},t.propToAttr={},Object.keys(t.constructor.props).forEach((function(e){var n=t.constructor.attributeName(e);t.attrToProp[n]=e,t.propToAttr[e]=n})),n&&(t.attachShadow(a({mode:"open"},o)),t._=t.shadowRoot);var c=Object.keys(t.constructor.props).reduce((function(e,n){return a(a({},e),{},r({},n,t[n]))}),{});return Promise.resolve().then((function(){t._props={},Object.keys(t.constructor.props).forEach((function(e){var n=t.constructor.props[e],r=t.propToAttr[e],i=t[e];if(t.hasAttribute(r)){if(i=t.getAttribute(r),[Array,Object].includes(n.type))try{i=JSON.parse(i)}catch(e){}}else void 0!==c[e]&&(i=c[e]);Object.defineProperty(h(t),e,{set:t.setter(e),get:t.getter(e)}),t[e]=i}))})),t._renderPromise=null,t._isConnected=!1,t._triggers={},t}return n(s,null,[{key:"attributeName",value:function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}},{key:"props",get:function(){return{}}},{key:"observedAttributes",get:function(){var e=this;return Object.keys(this.props).map((function(t){return e.attributeName(t)}))}}]),n(s,[{key:"connectedCallback",value:function(){this._isConnected=!0,this._render(!0,!0)}},{key:"disconnectedCallback",value:function(){this._isConnected=!1}},{key:"_requestRender",value:function(){var e=this;this._renderPromise||(this._renderPromise=Promise.resolve().then((function(){e._render()})))}},{key:"_render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t||this.shouldRender(this._triggers)&&Object.keys(this._triggers).length)&&(this._renderPromise=Promise.resolve().then((function(){n&&(e.firstRender(e._,e._triggers),e.$=v(e._.querySelectorAll("[id]")).reduce((function(e,t){return a(a({},e),{},r({},t.id,t))}),{}),e.firstRendered(e._,e._triggers)),e.render(e._,e._triggers),e.rendered(e._,e._triggers),e._renderPromise=null,e._triggers={}})))}},{key:"forceRender",value:function(){this._render(!0)}},{key:"shouldRender",value:function(){return!0}},{key:"firstRender",value:function(){}},{key:"render",value:function(){}},{key:"firstRendered",value:function(){}},{key:"rendered",value:function(){}},{key:"setter",value:function(e){var t=this,n=this.propToAttr[e];return function(r){if(t._props[e]!==r){e in t._triggers||(t._triggers[e]=t._props[e]),t._props[e]=r;var i=t.constructor.props[e];if(t.constructor.observedAttributes.includes(n)){var a=r;i.type===Boolean?(a=a||""===a)?t.setAttribute(n,""):t.removeAttribute(n):([Array,Object].includes(i.type)&&(a=JSON.stringify(a)),t.getAttribute(n)!==a&&([null,void 0].includes(a)?t.removeAttribute(n):t.setAttribute(n,a)))}t._isConnected&&t._requestRender()}}}},{key:"getter",value:function(e){var t=this;return function(){return t._props[e]}}},{key:"attributeChangedCallback",value:function(e,t,n){var r=this.attrToProp[e],i=n;switch(this.constructor.props[r].type){case Boolean:i=""===i;break;case Number:i=Number(i);break;case Array:case Object:try{i=JSON.parse(i)}catch(e){}}this[r]!==i&&(this[r]=i)}}]),s}(d(HTMLElement)),g=function(t){o(i,t);var r=f(i);function i(){var t;e(this,i),t=r.call(this);var n=new Date;t.showTime=!1,t.confirmOnDate=!1,t.alignTop=!1,t.alignRight=!1,t.dateStyle={},t.startYear=n.getFullYear()-100,t.endYear=n.getFullYear()+5,t.startDay=1;try{var a=document.createElement("input");a.type="date",t.hasNative="date"===a.type}catch(e){t.hasNative=!1}return t.onLabelClick=t.onLabelClick.bind(h(t)),t.onClickOutside=t.onClickOutside.bind(h(t)),t}return n(i,null,[{key:"props",get:function(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},dateStyle:{type:Object},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},defaultDate:{type:String},defaultTime:{type:String},hasNative:{type:Boolean},useNative:{type:Boolean},alignTop:{type:Boolean},alignRight:{type:Boolean}}}}]),n(i,[{key:"connectedCallback",value:function(){y(s(i.prototype),"connectedCallback",this).call(this),document.addEventListener("click",this.onClickOutside)}},{key:"disconnectedCallback",value:function(){var e=this;y(s(i.prototype),"disconnectedCallback",this).call(this),this._dateInput&&v(this._dateInput.labels||[]).forEach((function(t){t.removeEventListener("click",e.onLabelClick)})),document.removeEventListener("click",this.onClickOutside)}},{key:"firstRender",value:function(e){var t=document.createElement("template");t.innerHTML='\n      <style>\n        :host {\n          position: relative;\n          display: inline-block;\n\n          --rgb: var(--aeon-rgb, 0, 0, 0);\n          --bgRgb: var(--aeon-bgRgb, 248, 248, 248);\n          --color: rgb(var(--rgb));\n          --hintColor: rgba(var(--rgb), 0.2);\n          --bgColor: rgb(var(--bgRgb));\n\n          color: var(--color);\n        }\n\n        ::slotted(input[type=date]),\n        ::slotted(input[type=time]) {\n          display: none;\n        }\n\n        :host([has-native][use-native]) ::slotted(input[type=date]),\n        :host([has-native][use-native]) ::slotted(input[type=time]) {\n          display: inline-flex;\n        }\n\n        :host([has-native][use-native]) slot[name=output] {\n          display: none;\n        }\n\n        aeon-calendar {\n          position: absolute;\n          top: 100%;\n          left: 0;\n        }\n\n        :host([align-top]) aeon-calendar {\n          top: auto;\n          bottom: 100%;\n        }\n\n        :host([align-right]) aeon-calendar {\n          left: auto;\n          right: 0;\n        }\n\n        @media (max-width: 640px) {\n          aeon-calendar,\n          :host([align-top]) aeon-calendar,\n          :host([align-right]) aeon-calendar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n          }\n        }\n      </style>\n\n      <slot></slot>\n      <slot name="output"></slot>\n\n      <aeon-calendar id="calendar"></aeon-calendar>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(t,"aeon-datepicker"),window.ShadyCSS&&ShadyCSS.styleElement(this),e.appendChild(t.content.cloneNode(!0))}},{key:"firstRendered",value:function(e){var t=this,n=e.querySelector("slot");n.addEventListener("slotchange",(function(e){var r=n.assignedNodes().filter((function(e){return e.nodeType!=Node.TEXT_NODE}));t._dateInput=r.find((function(e){return"date"===e.getAttribute("type")})),t._dateInput&&(t._output.placeholder=t._dateInput.placeholder,(t._dateInput.labels||[]).forEach((function(e){e.addEventListener("click",t.onLabelClick)})),t.date=t._dateInput.value),t._timeInput=r.find((function(e){return"time"===e.getAttribute("type")})),t._timeInput&&(t.showTime=!0,t.time=t._timeInput.value)})),this._output=document.createElement("input"),this._output.slot="output",this._output.readOnly=!0,this._output.addEventListener("click",(function(){t.openCalendar()})),this.appendChild(this._output),this.addEventListener("keyup",(function(e){switch(e.key){case" ":t.$.calendar.open||t.openCalendar()}})),this.$.calendar.addEventListener("change",(function(e){t.date=e.target.value.date,t.time=e.target.value.time,t.closeCalendar()})),this.$.calendar.addEventListener("clear",(function(){t.date=""})),this.$.calendar.addEventListener("close",(function(){t._dontFocus||t._output.focus(),t._dontFocus=!1}))}},{key:"render",value:function(e,t){("date"in t||"time"in t)&&(this.value={date:this.date,time:this.time},this.updateFromString(this.date,this.time),this.dispatchEvent(new Event("change",{bubbles:!0}))),("locale"in t||"startYear"in t||"endYear"in t||"startDay"in t||"showTime"in t||"confirmOnDate"in t)&&this.updateFromString(this.date,this.time)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e&&!isNaN(e),n=e;if(!t){var r=this.defaultDate,i=this.defaultTime;n=this.parseDate(r,i)}var o=this.$.calendar;if(o.year=n.getFullYear(),o.month=n.getMonth(),o.day=n.getDate(),o.hours=n.getHours(),o.minutes=n.getMinutes(),o.locale=this.locale,o.startYear=this.startYear,o.endYear=this.endYear,o.startDay=this.startDay,o.showTime=this.showTime,o.confirmOnDate=this.confirmOnDate,t){var s=new Intl.DateTimeFormat(this.locale||void 0,a(a({year:"numeric",month:"numeric",day:"numeric"},this.showTime?{hour:"numeric",minute:"numeric"}:{}),this.dateStyle)).format(e);this._output.value=s,this._dateInput&&(this._dateInput.value=this.date),this._timeInput&&(this._timeInput.value=this.time)}else this._output.value="",this._dateInput&&(this._dateInput.value=""),this._timeInput&&(this._timeInput.value="")}},{key:"openCalendar",value:function(){var e=this.getBoundingClientRect(),t=e.top,n=window.innerHeight-e.bottom,r=e.left,i=window.innerWidth-e.right;this.alignTop=n<t,this.alignRight=i<r,this.$.calendar.open=!0}},{key:"closeCalendar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$.calendar.open=!1,this._dontFocus=e}},{key:"parseDate",value:function(e,t){try{var n=e.split("-"),r=(t||this.defaultTime||"00:00").split(":");return new Date(n[0],parseInt(n[1],10)-1,n[2],r[0],r[1])}catch(e){return new Date}}},{key:"updateFromString",value:function(e,t){this.update(this.parseDate(e,t))}},{key:"onLabelClick",value:function(e){this.useNative&&this.hasNative||(e.preventDefault(),this._output.focus())}},{key:"onClickOutside",value:function(e){var t=this;this.$.calendar.open&&(!e.composedPath().some((function(e){return e===t}))&&this.closeCalendar(!0))}}]),i}(b),w=function(t){o(i,t);var r=f(i);function i(){var t;return e(this,i),(t=r.call(this)).items=[],t}return n(i,null,[{key:"props",get:function(){return{value:{type:Number},items:{type:Array}}}}]),n(i,[{key:"firstRender",value:function(e){var t=document.createElement("template");t.innerHTML='\n      <style>\n        select {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          padding: 0.5rem;\n          padding-right: 1.5rem;\n          font-family: inherit;\n          font-size: inherit;\n          border-radius: 0;\n          border: 1px solid var(--hintColor);\n          background-color: transparent;\n          color: var(--color);\n          width: 100%;\n        }\n\n        select::-ms-expand {\n          display: none;\n        }\n\n        .select {\n          position: relative;\n        }\n\n        .select .indicator {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: 0.2rem;\n          pointer-events: none;\n          display: flex;\n          align-items: center;\n        }\n      </style>\n\n      <div class="select">\n        <select id="select">\n        </select>\n        <span class="indicator">\n          <svg width="24" height="24">\n            <g><path fill="currentColor" d="M7 10l5 5 5-5z"></path></g>\n          </svg>\n        </span>\n      </div>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(t,"aeon-select"),window.ShadyCSS&&ShadyCSS.styleElement(this),e.appendChild(t.content.cloneNode(!0))}},{key:"focus",value:function(){this.$.select.focus()}},{key:"firstRendered",value:function(e){var t=this;this.$.select.addEventListener("change",(function(e){t.value=e.target.value}))}},{key:"render",value:function(e,t){"value"in t&&this.dispatchEvent(new Event("change",{bubbles:!0})),this.$.select.innerHTML=this.items.map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join(""),this.$.select.value=this.value}}]),i}(b),k=function(t){o(i,t);var r=f(i);function i(){var t;return e(this,i),(t=r.call(this)).showTime=!1,t.confirmOnDate=!1,t.open=!1,t}return n(i,null,[{key:"props",get:function(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},year:{type:Number},month:{type:Number},day:{type:Number},hours:{type:Number},minutes:{type:Number},open:{type:Boolean}}}}]),n(i,[{key:"connectedCallback",value:function(){y(s(i.prototype),"connectedCallback",this).call(this),this.addEventListener("keydown",this.onKeyDown.bind(this))}},{key:"firstRender",value:function(e){var t=document.createElement("template");t.innerHTML='\n      <style>\n        :host {\n          display: none;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n\n          position: relative;\n          z-index: 1;\n          padding: 0.2rem;\n          background-color: var(--bgColor);\n        }\n\n        :host([open]) {\n          display: flex;\n        }\n\n        .week {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .day, .date, button {\n          color: var(--color);\n          background-color: transparent;\n          border: 0;\n          box-sizing: border-box;\n          width: 2.4rem;\n          height: 2.4rem;\n          padding: 0;\n          font-family: inherit;\n          font-size: calc(2.4rem / 3);\n\n          text-transform: uppercase;\n\n          flex-grow: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .date {\n          border: 1px solid var(--hintColor);\n          border-width: 0 0 1px 1px;\n        }\n\n        .date:last-child {\n          border-right-width: 1px;\n        }\n\n        .date.last + .spacer {\n          border-left-width: 1px;\n        }\n\n        .week:nth-child(2) .date:not(.spacer) {\n          border-top-width: 1px;\n        }\n\n        .week:last-child .spacer {\n          border-right-width: 0;\n          border-bottom-width: 0;\n        }\n\n        .date.today {\n          font-weight: bold;\n        }\n\n        .date:hover, .date.today {\n          font-size: 1.3rem;\n        }\n\n        .date.spacer {\n          border-left-width: 0;\n          pointer-events: none;\n        }\n\n        #buttons {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n        }\n\n        #year-month, #hours-minutes {\n          display: flex;\n          width: 100%;\n        }\n\n        #year-month aeon-select {\n          width: 50%;\n        }\n\n        #year-month aeon-select + aeon-select {\n          margin-left: 0.5rem;\n        }\n\n        #hours-minutes {\n          padding-top: 0.5em;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n          display: none;\n          justify-content: center;\n          align-items: center;\n        }\n\n        #hours-minutes aeon-select {\n          width: 3.5rem;\n        }\n\n        #hours-minutes aeon-select#hours {\n          margin-right: 0.2em;\n        }\n\n        #hours-minutes aeon-select#minutes {\n          margin-left: 0.2em;\n        }\n\n        :host([show-time]) #hours-minutes {\n          display: flex;\n        }\n      </style>\n\n      <div id="container">\n        <div id="year-month">\n          <aeon-select id="year"></aeon-select>\n          <aeon-select id="month"></aeon-select>\n        </div>\n        <div id="calendar"></div>\n        <div id="hours-minutes">\n          <aeon-select id="hours"></aeon-select>:<aeon-select id="minutes"></aeon-select>\n        </div>\n        <div id="buttons">\n          <button id="confirm" title="Confirm">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g>\n            </svg>\n          </button>\n          <button id="cancel" title="Cancel">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>\n            </svg>\n          </button>\n          <button id="clear" title=\'Clear\'>\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g>\n            </svg>\n          </button>\n        </div>\n      </div>\n    ',window.ShadyCSS&&ShadyCSS.prepareTemplate(t,"aeon-calendar"),window.ShadyCSS&&ShadyCSS.styleElement(this),e.appendChild(t.content.cloneNode(!0))}},{key:"firstRendered",value:function(e){var t=this;this.addEventListener("keyup",(function(e){switch(e.key){case"Escape":t.open=!1}})),this.$.year.addEventListener("change",(function(e){t.year=e.target.value})),this.$.month.addEventListener("change",(function(e){t.month=e.target.value})),this.$.hours.items=[];for(var n=0;n<24;n++)this.$.hours.items.push({name:"".concat(n).padStart(2,"0"),value:n});this.$.hours.addEventListener("change",(function(e){t.hours=e.target.value})),this.$.minutes.items=[];for(var r=0;r<60;r++)this.$.minutes.items.push({name:"".concat(r).padStart(2,"0"),value:r});this.$.minutes.addEventListener("change",(function(e){t.minutes=e.target.value})),this.$.calendar.addEventListener("click",this.onDateClick.bind(this)),this.$.cancel.addEventListener("click",(function(){t.open=!1})),this.$.confirm.addEventListener("click",(function(){t.confirm()})),this.$.clear.addEventListener("click",(function(){t.dispatchEvent(new Event("clear",{bubbles:!0})),t.open=!1}))}},{key:"render",value:function(e,t){var n=this;"open"in t&&!1===this.open&&!0===t.open&&this.dispatchEvent(new Event("close",{bubbles:!0})),("year"in t||"month"in t||"day"in t)&&(this.date=this.formatAsDate(this.year,this.month,this.day)),("hours"in t||"minutes"in t)&&(this.time=this.formatAsTime(this.hours,this.minutes));var r=new Date;r.setMonth(0),r.setDate(1),this.$.year.value=this.year,this.$.year.items=[];for(var i=this.startYear;i<=this.endYear;i++)this.$.year.items.push({value:i,name:i});this.$.month.value=this.month,this.$.month.items=[];for(var a=0;a<12;a++){var o=r.getMonth();this.$.month.items.push({value:o,name:r.toLocaleString(this.locale||void 0,{month:"short"})}),r.setMonth(a+1)}this.$.month.items.sort((function(e,t){return e.num-t.num})),r.setMonth(0),r.setDate(1);for(var s=[],c=0;c<7;c++){var u=r.getDay();s.push({num:u,name:r.toLocaleString(this.locale||void 0,{weekday:"short"})}),r.setDate(c+2)}var l=7-this.startDay;s.sort((function(e,t){return(e.num+l)%7-(t.num+l)%7})),this.$.hours.value=this.hours,this.$.minutes.value=this.minutes;var d=new Date(this.year,this.month,1,12),h=d.getDay();d.setMonth(d.getMonth()+1),d.setDate(0);var p=d.getDate();d=new Date(this.year,this.month,1,12);var f=!1,y=!1,v=0;this.$.calendar.innerHTML='\n      <div class="week">\n        '.concat(s.map((function(e){return'<div class="day">'.concat(e.name,"</div>")})).join(""),"\n      </div>\n\n      ").concat([0,1,2,3,4,5].map((function(){return v>=p?null:'\n          <div class="week">\n            '.concat(s.map((function(e){e.num%7===h&&(f=!0);var t="";f&&((v+=1)<=p?(t=v,d.setDate(t)):y=!0);var r=v===n.day;return'\n                  <button class="date '.concat(r?"today":""," ").concat(!f||y?"spacer":""," ").concat(v===p?"last":"",'" data-day="').concat(v,'" ').concat(!f||y?"tabindex='-1' disabled":"",">").concat(t,"</button>\n              ")})).join(""),"\n          </div>\n         ")})).join(""),"\n    ");var m=e.querySelectorAll("button:not([disabled]), aeon-select");this._firstFocusableEl=m[0],this._lastFocusableEl=m[m.length-1]}},{key:"rendered",value:function(e,t){!0===this.open&&("open"in t&&!1===t.open||"day"in t)&&e.querySelector(".today").focus()}},{key:"confirm",value:function(){this.date=this.formatAsDate(this.year,this.month,this.day),this.time=this.formatAsTime(this.hours,this.minutes),this.value={date:this.date,time:this.time},this.dispatchEvent(new Event("change",{bubbles:!0}))}},{key:"handleTabKey",value:function(e){var t=this.shadowRoot.activeElement;e.shiftKey&&t===this._firstFocusableEl?(this._lastFocusableEl.focus(),e.preventDefault()):e.shiftKey||t!==this._lastFocusableEl||(this._firstFocusableEl.focus(),e.preventDefault())}},{key:"handleArrowKeys",value:function(e){var t=0;switch(e.key){case"ArrowUp":t=-7;break;case"ArrowRight":t=1;break;case"ArrowLeft":t=-1;break;case"ArrowDown":t=7}var n=new Date(this.year,this.month,this.day);n.setDate(this.day+t),this.year=n.getFullYear(),this.month=n.getMonth(),this.day=n.getDate()}},{key:"onKeyDown",value:function(e){"Enter"===e.key?this.confirm():"Tab"===e.key?this.handleTabKey(e):["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(e.key)&&this.handleArrowKeys(e)}},{key:"onDateClick",value:function(e){if(e.target.classList.contains("date")){var t=e.target;this.day=parseInt(t.dataset.day,10),this.confirmOnDate&&!this.showTime&&this.confirm()}}},{key:"formatAsDate",value:function(e,t,n){return"".concat(e,"-").concat("".concat(t+1).padStart(2,"0"),"-").concat("".concat(n).padStart(2,"0"))}},{key:"formatAsTime",value:function(e,t){return"".concat("".concat(e).padStart(2,"0"),":").concat("".concat(t).padStart(2,"0"))}}]),i}(b);customElements.define("aeon-select",w),customElements.define("aeon-calendar",k),customElements.define("aeon-datepicker",g)}));
